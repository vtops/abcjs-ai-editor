# 修复 Cloudflare Pages 404 问题

## 问题描述

部署成功但访问页面显示 404，这是因为 Cloudflare Pages 需要配置 SPA 路由重定向。

## 解决方案

### 方案一：使用 `_redirects` 文件（已修复）

✅ **已修复**：`public/_redirects` 文件格式已更新为：
```
/* /index.html 200
```

**下一步**：
1. 提交并推送更改到 GitHub
2. Cloudflare Pages 会自动重新部署
3. 等待部署完成后测试

### 方案二：在 Cloudflare Dashboard 手动配置（备选）

如果 `_redirects` 文件仍然不工作，可以在 Cloudflare Dashboard 中手动配置：

1. **登录 Cloudflare Dashboard**
   - 进入你的 Pages 项目

2. **配置重定向规则**
   - 进入 **Settings** → **Functions** → **Redirects**
   - 点击 **Add a redirect rule**
   - 配置如下：
     - **Source**: `/*`
     - **Destination**: `/index.html`
     - **Status code**: `200`
   - 点击 **Save**

3. **重新部署**
   - 在 **Deployments** 标签页
   - 找到最新的部署
   - 点击 **Retry deployment**

## 验证修复

部署完成后，访问以下 URL 应该都能正常加载：
- `https://your-project.pages.dev/` （根路径）
- `https://your-project.pages.dev/any-route` （任意路由）

如果仍然 404，请检查：
1. 浏览器开发者工具 → Network 标签，查看具体哪个资源返回 404
2. Cloudflare Dashboard → 部署日志，确认所有文件都已上传
3. 确认 `build/client` 目录包含 `index.html` 和 `_redirects` 文件

## 常见问题

### Q: 为什么只上传了 8 个文件？

A: Cloudflare Pages 可能只统计了主要资源文件。检查部署日志中的 "Uploading..." 部分，应该包含所有文件。

### Q: `_redirects` 文件格式有什么要求？

A: 格式必须是：`/* /index.html 200`（使用单个空格分隔，不是多个空格或制表符）

### Q: 如何确认 `_redirects` 文件已部署？

A: 在 Cloudflare Dashboard → 部署详情中，应该能看到 `_redirects` 文件在文件列表中。
